name: Discord Notification

on:
  push:
    branches:
      - '**'

jobs:
  discord-notify:
    runs-on: ubuntu-latest
    # Skip commits where the message contains [skip discord] or [skip ci]
    if: "!contains(github.event.head_commit.message, '[skip discord]') && !contains(github.event.head_commit.message, '[skip ci]')"

    steps:
      - name: Send Discord Webhook
        uses: sarisia/actions-status-discord@v1
        with:
          webhook: ${{ secrets.DISCORD_WEBHOOK_URL }}
          status: ${{ job.status }}
          content: |
            **New Commit Pushed**
            **Repository:** ${{ github.repository }}
            **Branch:** ${{ github.ref_name }}
            **Commit:** `${{ github.sha }}`
            **Author:** ${{ github.actor }}
            **Message:** ${{ github.event.head_commit.message }}
          description: |
            **Branch:** ${{ github.ref_name }}
            **Commit:** `${{ github.sha }}`
            **Author:** ${{ github.actor }}
          title: "üìù New Commit - ${{ github.ref_name }}"
          url: ${{ github.event.head_commit.url }}
          color: 0x5865F2
          username: InkNest Git Bot
          avatar_url: https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png
          nofail: true
